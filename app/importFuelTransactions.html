<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Import Fuel Transactions</title>

    <!-- build:css styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.css">
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->

    <!-- build:js scripts/vendor.js -->
    <!-- bower:js -->
    <script src="/bower_components/bluebird/js/browser/bluebird.js"></script>
    <script src="/bower_components/moment/moment.js"></script>
    <script src="/bower_components/moment-timezone/builds/moment-timezone-with-data.js"></script>
    <!-- endbower -->
    <!-- endbuild -->

    <!-- build:js scripts/main.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->
</head>

<body>

    <div id="importFuelTransactions" class="app bootstrap" style="display: none">
        <div class="container-fluid">

            <section class="row">
                <div class="col-sm-12">
                    <h1>Import Fuel Transactions</h1>

                    <p>Import fuel card transactions to your account. Simply select the file, click <q>Open File<q>, verify the columns are in the corect format and click <q>Import</q>.</p>
                    <p>View fuel transactions by navigating to Engine and Maintenance -> Fuel Usage -> Fill-Ups</p>
                    <p>Supported file providers:</p>
                    <ul>
                        <li>WEX</li>
                        <li>
                            <label class="btn btn-default btn-xs" title="Shows example of generic fuel card csv format">
                            <input style="display: none" type="checkbox" id="exampleButton">Generic Format
                        </li>
                    </ul>
                </div>
            </section>

            <!-- alert info -->
            <section class="row">
                <div class="col-sm-12">
                    <div id="alertInfo" style="display: none" class="alert alert-info">
                        <div class="spinner">
                            <div class="rect1"></div>
                            <div class="rect2"></div>
                            <div class="rect3"></div>
                            <div class="rect4"></div>
                            <div class="rect5"></div>
                        </div>
                        <span></span>
                    </div>
                    <div id="alertSuccess" style="display: none" class="alert alert-success">Successfully added
                        <span></span> fuel transactions
                    </div>
                    <div id="alertError" style="display: none" class="alert alert-danger">Error: <span></span></div>
                </div>
            </section>

            <!-- sample -->
            <section class="row" id="sample" style="display: none">
                <div class="col-sm-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">Generic Fuel Card csv file sample</div>
                        <div class="panel-body">
                            <p>If your file does not conform to one of the know fuel card csv files types you can convert your
                                csv file to the generic fuel card csv file type. This file type conforms to the FuelTransaction
                                API object specification. See the
                                <a href="https://my.geotab.com/sdk/default.html#/api">API Reference</a> for more details.
                            </p>

                            <p>
                                File should include column headings row and data rows.
                            </p>

                            <div class="table-responsive">

                                <table class="table table-condensed table-striped table-bordered">
                                    <tr>
                                        <th>VIN</th>
                                        <th>Description</th>
                                        <th>Serial Number</th>
                                        <th>Licence Plate</th>
                                        <th>Comments</th>
                                        <th>Date Time</th>
                                        <th>Volume</th>
                                        <th>Cost</th>
                                        <th>Currency Code</th>
                                        <th>Odometer</th>
                                        <th>Longitude</th>
                                        <th>Latitude</th>
                                        <th>Driver Name</th>
                                        <th>Product Type</th>
                                        <th>[user defined]...</th>
                                    </tr>
                                    <tr>
                                        <td>WMWMF33598T519807</td>
                                        <td>F150 #1234</td>
                                        <td>G7CC00000BC1</td>
                                        <td>ABAB123</td>
                                        <td>Vehicle 12345</td>
                                        <td>2014-05-26T21:39:08.277Z</td>
                                        <td>100.2</td>
                                        <td>150.2</td>
                                        <td>CAD</td>
                                        <td>19000</td>
                                        <td>-79.70987919999999</td>
                                        <td>43.434810399999996</td>
                                        <td>Jane Doe</td>
                                        <td>DIESEL</td>
                                        <td>*</td>
                                    </tr>
                                    <tr class="info">
                                        <td><em>string</em> - vehicle VIN</td>
                                        <td><em>string</em> - device description</td>
                                        <td><em>string</em> - device serial number</td>
                                        <td><em>string</em> - vehicle licence plate</td>
                                        <td><em>string</em> - comments</td>
                                        <td><em>string</em> - ISO date time (UTC)</td>
                                        <td><em>number</em> - volume of fuel added (Litres)</td>
                                        <td><em>number</em> - cost</td>
                                        <td><em>string</em> - <a href="http://www.xe.com/iso4217.php" target="_blank">three digit ISO 427 currency code</a></td>
                                        <td><em>number</em> - driver entered odometer (KM)</td>
                                        <td><em>number</em> - longitude</td>
                                        <td><em>number</em> - latitude</td>
                                        <td><em>string</em> - driver name</td>
                                        <td><em>string</em> - product type, options:
                                            <ul class="list-unstyled">
                                                <li>Unknown</li>
                                                <li>NonFuel</li>
                                                <li>Regular</li>
                                                <li>Midgrade</li>
                                                <li>Premium</li>
                                                <li>Super</li>
                                                <li>Diesel</li>
                                                <li>E85</li>
                                                <li>CNG</li>
                                                <li>LPG</li>
                                            </ul>
                                        </td>
                                        <td>other user defined columns can be defined after the mandatory columns. These columns
                                            must have a heading and data. The data will be stored in the "SourceData" JSON
                                            string.
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <a class="btn btn-default" href="https://cdn.rawgit.com/Geotab/addin-fuel-transaction-import/master/app/generic_fuel_card_csv_file_sample.csv">Download sample csv file</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- file select -->
            <section class="row" id="fileSelectContainer">
                <div class="col-sm-12">
                    <form class="form-horizontal" role="form" id="form">
                        <fieldset>
                            <legend>Select File</legend>
                            <div class="form-group">
                                <label class="col-sm-2 col-lg-1 control-label" for="files">Select file</label>

                                <div class="col-sm-6 col-md-4 col-lg-3">
                                    <div class="input-group">
                                        <span class="input-group-btn">
                                        <span class="btn btn-default btn-file">
                                            Browse <input type="file" id="files" name="fileToUpload">
                                        </span>
                                        </span>
                                        <input type="text" class="form-control" id="fileName" readonly>
                                    </div>
                                    <p class="help-block">(.xls, .xlsx, .csv)</p>
                                </div>
                                <div class="col-sm-2 col-lg-1">
                                    <button disabled="disabled" class="btn btn-primary" id="parseButton" title="Load fuel card transactions from selected file">Open File</button>
                                </div>
                            </div>
                            <input type="hidden" name="JSON-RPC" />
                        </fieldset>
                    </form>
                    <!-- for ie9 -->
                    <iframe name="fileUpload" width="0" height="0" frameborder="0"></iframe>
                </div>
            </section>

            <!-- import -->
            <div id="transactionContainer" style="display: none">
                <section class="row">
                    <div class="col-sm-12">
                        <div class="btn-toolbar" role="toolbar">
                            <div class="btn-group" role="group" aria-label="...">
                                <button class="btn btn-default" id="cancelButton" title="Cancel">Cancel</button>
                            </div>
                            <div class="btn-group" role="group" aria-label="...">
                                <div class="input-group">
                                    <div class="input-group-btn">
                                        <button disabled="disabled" class="btn btn-primary" id="importButton" title="Import fuel card transactions">Import</button>
                                    </div>
                                    <label class="sr-only" for="fleet">Fleet</label>
                                    <select disabled class="form-control" id="fleet" title="When a file has more than one fleet, select the fleet from this list."></select>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="row">
                    <div class="col-sm-12">
                        <h3>Found fuel transactions!</h3>
                        <p>Showing first <span id="listCount"></span> fuel transactions. Verify the columns have the correct values then click import.</p>
                        <div class="table-responsive">
                            <table id="transactionList" class="table table-condensed table-striped"></table>
                        </div>
                    </div>
                </section>
            </div>

        </div>
    </div>
</body>

</html>